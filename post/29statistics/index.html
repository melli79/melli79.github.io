<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>29. Statistik und Geschlecht - Melchior&#39;s Homepage</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="melli79" /><meta name="description" content="statistics and gender" />






<meta name="generator" content="Hugo 0.109.0 with theme even" />


<link rel="canonical" href="https://melli79.github.io/post/29statistics/" />
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">



<link href="/sass/main.min.78d3a03abaed5d3c468bdf402fc110f36c046abf091a63421b9ce0a5a63db941.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">


<meta property="og:title" content="29. Statistik und Geschlecht" />
<meta property="og:description" content="statistics and gender" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://melli79.github.io/post/29statistics/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2021-12-19T20:25:47+01:00" />
<meta property="article:modified_time" content="2021-12-19T20:25:47+01:00" />
<meta itemprop="name" content="29. Statistik und Geschlecht">
<meta itemprop="description" content="statistics and gender"><meta itemprop="datePublished" content="2021-12-19T20:25:47+01:00" />
<meta itemprop="dateModified" content="2021-12-19T20:25:47+01:00" />
<meta itemprop="wordCount" content="2758">
<meta itemprop="keywords" content="" /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="29. Statistik und Geschlecht"/>
<meta name="twitter:description" content="statistics and gender"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Melchior&#39;s Homepage</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Themes</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Melchior&#39;s Homepage</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Themes</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">29. Statistik und Geschlecht</h1>

      <div class="post-meta">
        <span class="post-time"> 2021-12-19 </span>
        <div class="post-category">
            <a href="/categories/programming/"> Programming </a>
            <a href="/categories/kotlin/"> Kotlin </a>
            </div>
        
      </div>
    </header>

    <div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">Contents</h2>
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
  <ul>
    <li><a href="#1-woran-erkennt-man-ob-jemand-weiblich-ist">1. Woran erkennt man, ob jemand weiblich ist?</a></li>
    <li><a href="#2-wie-gut-ist-unsere-funktion">2. Wie gut ist unsere Funktion?</a></li>
    <li><a href="#2-was-erzeugt-das-programm">2. Was erzeugt das Programm?</a></li>
    <li><a href="#3-ein-bisschen-bessere-erkennung">3. Ein bisschen bessere Erkennung</a></li>
    <li><a href="#4-wie-gut-ist-die-erkennung-für-große-namenslisten">4. Wie gut ist die Erkennung für große Namenslisten?</a></li>
  </ul>
</nav>
  </div>
</div>
    <div class="post-content">
      <p>Heute wollen wir uns fragen, wie der Computer am Namen erkennen kann, ob jemand Mann oder Frau ist.</p>
<h1 id="1-woran-erkennt-man-ob-jemand-weiblich-ist">1. Woran erkennt man, ob jemand weiblich ist?</h1>
<p>Natürlich ist der Vorname nicht die einzige Quelle, anhand derer man das entscheiden kann, z.B. kann man oft auch am Surf- oder Kaufverhalten herausfinden, ob jemand Mann (Junge) oder Frau (Mädchen) ist.</p>
<p>Auch ist es nicht immer ganz eindeutig, ob jemand Mann oder Frau ist, z.B. gibt es Männer, die sich schminken oder Frauen, die &hellip; .  Aber das soll jetzt erst einmal nicht stören.</p>
<p>Als Ausgangspunkt dienen uns diese 2 Listen von <a href="/maleNames.csv">männlichen</a> und <a href="/femaleNames.csv">weiblichen</a> Vornamen.  Das sind die häufigsten männlichen und weiblichen Vornamen in Deutschland (im Jahre 2021), sortiert nach Häufigkeit.</p>
<p>Sprachwissenschaftler haben herausgefunden, dass man in verschiedenen Sprachen männliche und weibliche Namen an verschiedenen Merkmalen erkennen kann.  Im Zweifelsfall kann man sich zu jeden Namen einzeln merken, ob er weiblich oder männlich ist, aber geht es auch einfacher?  Manche Sprachen, wie etwa das Deutsche haben typische Eigenschaften von weiblichen Namen und alle Namen, die nicht typisch weiblich sind, sind dann eben männlich.  Das machen wir uns zunutze und wollen eine Funktion schreiben, die entscheidet, ob ein Vorname weiblich ist, also etwa so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">fun</span> <span class="nf">isFemale</span><span class="p">(</span><span class="n">name</span> <span class="p">:</span><span class="n">String</span><span class="p">)</span> <span class="p">:</span><span class="n">Boolean</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">false</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>An die Bezeichnung <code>fun</code> erinnerst du dich vielleicht noch, sie bedeutet function und kennzeichnet einen Teil des Programmes.  Im Gegensatz zur Hauptfunktion <code>fun main()</code> nimmt unsere Funktion ein Argument entgegen, konkret den Namen als Text <code>(name :String)</code>.  Außerdem gibt die Funktion explizit etwas zurück, nämlich die Antwort, ob der Name weiblich ist (<code>true</code>, wahr) oder nicht (<code>false</code>, falsch).  Dieser Typ heißt <code>Boolean</code>.</p>
<p>Natürlich ist die Funktion noch nicht fertig, denn nicht alle Vornamen sind nicht weiblich, aber im Prinzip muss die Funktion so ähnlich aussehen.</p>
<h1 id="2-wie-gut-ist-unsere-funktion">2. Wie gut ist unsere Funktion?</h1>
<p>Als nächstes wollen wir fragen, wie gut unsere Funktion ist.  Wir wissen schon, dass sie nicht immer richtig antwortet, aber vielleicht können wir wenigstens sagen, wie oft sie richtig antwortet.  Dazu schreiben wir ein Hauptprogramm, dass ein paar weibliche, ein paar männliche Namen einliest und dann schaut, ob die Funktion richtig entscheidet.</p>
<p>Mit Hilfe der for-Schleifen vom letzten Mal können wir das erreichen:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="o">..</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="k">in</span> <span class="m">1.</span><span class="p">.</span><span class="m">10</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">print</span><span class="p">(</span><span class="s2">&#34;Geben Sie einen weiblichen Vornamen ein (oder drücken Sie direkt Enter): &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">val</span> <span class="py">line</span> <span class="p">=</span> <span class="n">readLine</span><span class="p">()</span> <span class="o">?:</span> <span class="k">break</span>
</span></span><span class="line"><span class="cl">      <span class="k">val</span> <span class="py">name</span> <span class="p">=</span> <span class="n">line</span><span class="p">.</span><span class="n">trim</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span>
</span></span><span class="line"><span class="cl">      <span class="n">isFemale</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="k">in</span> <span class="m">1.</span><span class="p">.</span><span class="m">10</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">print</span><span class="p">(</span><span class="s2">&#34;Geben sie einen männlichen Vornamen ein (oder drücken Sie direkt Enter): &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">val</span> <span class="py">line</span> <span class="p">=</span> <span class="n">readLine</span><span class="p">()</span> <span class="o">?:</span> <span class="k">break</span>
</span></span><span class="line"><span class="cl">      <span class="k">val</span> <span class="py">name</span> <span class="p">=</span> <span class="n">line</span><span class="p">.</span><span class="n">trim</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span>
</span></span><span class="line"><span class="cl">      <span class="n">isFemale</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="o">..</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>readLine()</code> liest eine Zeile von der Kommandozeile ein und <code>?: break</code> bricht die Schleife ab, falls die Eingabe abgebrochen wurde.  <code>if (name.isEmpty())</code> testet, ob der Name leer ist.  In diesem Falle wird mit <code>break</code> ebenfalls die Schleife abgebrochen.</p>
<p>Wie kommen wir jetzt zum Auszählen?  Wir müssten irgendwie abhängig vom Ergebnis <code>isFemale(name)</code> einen Zähler erhöhen.  Den Zähler können wir so anlegen: <code>var truePositive = 0</code>, d.h. wir legen eine Variable mit Namen <code>truePositive</code> (also die korrekt als weiblich erkannten) an und fangen bei 0 an. <code>var</code> im Gegensatz zu <code>val</code> bedeutet, dass sich der Wert im Laufe des Programmes ändern kann.</p>
<p>Entsprechend brauchen wir auch eine Variable <code>var falseNegative = 0</code> (fälschlicher Weise als nicht-weiblich erkannt), <code>var trueNegative = 0</code> (korrekt als nicht-weiblich erkannt) und <code>var falsePositive = 0</code> (fälschlicher Weise als weiblich erkannt).</p>
<p>Wenn wir wissen, dass der Name korrekt als weiblich erkannt wurde, dann können wir mit <code>truePositive++</code> den Zähler um 1 erhöhen, entsprechend mit <code>falseNegative++</code> die Anzahl der falsch zugeordneten weiblichen Namen um 1 erhöhen.</p>
<p>Wir dürfen aber immer nur 1 der beiden Zähler erhöhen, abhängig vom Ergebnis von <code>isFemale(name)</code>.  Das heißt, falls <code>isFemale(name)</code>, dann <code>truePositive++</code>, ansonsten <code>falseNegative++</code>.  Jetzt müssen wir das nur noch dem Computer verständlich machen.  Die Sprache Kotlin ist am Englischen angelehnt, d.h. &ldquo;Falls&rdquo; wird mit <code>if</code> übersetzt (nicht <code>when</code>, da ja nicht klar ist, ob die Bedingung jemals eintritt) und &ldquo;ansonsten&rdquo; heißt <code>else</code>.  Insgesamt sieht das dann in der ersten for-Schleife so aus:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">isFemale</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">truePositive</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">  <span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="n">falseNegative</span><span class="o">++</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>In der zweiten for-Schleife haben wir nur männliche Namen, d.h. wenn ein männlicher Namen als nicht-weiblich erkannt wird, dann ist das ein korrekt negativer Fall, ansonsten ein falscher positiver Fall.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!is</span><span class="n">Female</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="n">trueNegative</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">  <span class="k">else</span>
</span></span><span class="line"><span class="cl">    <span class="n">falsePositive</span><span class="o">++</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>!isFemale(name)</code> bedeutet nicht-weiblich, <code>!</code> negiert also wahr/falsch-Werte.</p>
<p>Wie können wir nun am Ende die Auszählung ausgeben?</p>
<p>Wir könnten einfach die 4 Zahlen ausgeben (<code>truePositive</code>, <code>falseNegative</code>, <code>trueNegative</code>, <code>falsePositive</code>), aber dann müsste man sich immer merken, welches welche Zahl ist.  Außerdem ergibt sich die Zahl der <code>falseNegative</code>, wenn man die Gesamtzahl der weiblichen Namen kennt.  Diese sollten wir auch mit angeben.  Entsprechend ergibt sich die Zahl der <code>falsePositive</code>, wenn man auch die Anzahl der männlichen Namen kennt.  Das kann man etwa so machen:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">positives</span> <span class="p">=</span> <span class="n">truePositive</span> <span class="p">+</span><span class="n">falseNegative</span>
</span></span><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">negatives</span> <span class="p">=</span> <span class="n">trueNegative</span> <span class="p">+</span><span class="n">falsePositive</span>
</span></span><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">numberOfErrors</span> <span class="p">=</span> <span class="n">falsePositive</span> <span class="p">+</span><span class="n">falseNegative</span>
</span></span><span class="line"><span class="cl">  <span class="n">println</span><span class="p">(</span><span class="s2">&#34;Korrekt weiblich erkannt: </span><span class="si">$truePositive</span><span class="s2">/</span><span class="si">$positives</span><span class="s2">;  korrekt männlich erkannt: </span><span class="si">$trueNegative</span><span class="s2">/</span><span class="si">$negatives</span><span class="s2">;  Gesamtzahl Fehler: </span><span class="si">$numberOfErrors</span><span class="s2">.&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Vom letzten Mal kennst du sicherlich noch <code>println()</code>, das gibt eine neue Zeile aus.  Neu ist, dass man da auch einen Text angeben kann, z.B. <code>&quot;Gesamtzahl Fehler: $numberOfErrrors.&quot;</code>.  Texte werden immer in doppelten Anführungszeichen geschrieben.  Interessant ist auch, dass der Computer nicht wörtlich den Text &ldquo;$numberOfErrors&rdquo; ausgibt, sondern dort die Anzahl der Fehler einsetzt (also die Zahl ausgibt), dazu dient das <code>$</code>.</p>
<h1 id="2-was-erzeugt-das-programm">2. Was erzeugt das Programm?</h1>
<p>Das bisher geschriebene Programm sieht etwa so aus:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">fun</span> <span class="nf">isFemale</span><span class="p">(</span><span class="n">name</span> <span class="p">:</span><span class="n">String</span><span class="p">)</span> <span class="p">:</span><span class="n">Boolean</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">false</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">var</span> <span class="py">truePositive</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>  <span class="k">var</span> <span class="py">falseNegative</span> <span class="p">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="k">in</span> <span class="m">1.</span><span class="p">.</span><span class="m">10</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">print</span><span class="p">(</span><span class="s2">&#34;Bitte geben Sie einen weiblichen Vornamen ein (oder drücken Enter zum Beenden): &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">val</span> <span class="py">line</span> <span class="p">=</span> <span class="n">readLine</span><span class="p">()</span> <span class="o">?:</span> <span class="k">break</span>
</span></span><span class="line"><span class="cl">      <span class="k">val</span> <span class="py">name</span> <span class="p">=</span> <span class="n">line</span><span class="p">.</span><span class="n">trim</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="n">isFemale</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">truePositive</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">      <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="n">falseNegative</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">var</span> <span class="py">trueNegative</span> <span class="p">=</span> <span class="m">0</span><span class="p">;</span>  <span class="k">var</span> <span class="py">falsePositive</span> <span class="p">=</span> <span class="m">0</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="k">in</span> <span class="m">1.</span><span class="p">.</span><span class="m">10</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="n">print</span><span class="p">(</span><span class="s2">&#34;Bitte geben Sie einen männlichen Vornamen ein (oder drücken Sie Enter zum Beenden): &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">      <span class="k">val</span> <span class="py">line</span> <span class="p">=</span> <span class="n">readLine</span><span class="p">()</span> <span class="o">?:</span> <span class="k">break</span>
</span></span><span class="line"><span class="cl">      <span class="k">if</span> <span class="p">(</span><span class="o">!is</span><span class="n">Female</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="n">trueNegative</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">      <span class="k">else</span>
</span></span><span class="line"><span class="cl">        <span class="n">falsePositive</span><span class="o">++</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">positives</span> <span class="p">=</span> <span class="n">truePositive</span> <span class="p">+</span><span class="n">falseNegative</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">negatives</span> <span class="p">=</span> <span class="n">trueNegative</span> <span class="p">+</span><span class="n">falsePositive</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">numberOfErrors</span> <span class="p">=</span> <span class="n">falsePositive</span> <span class="p">+</span><span class="n">falseNegative</span>
</span></span><span class="line"><span class="cl">    <span class="n">println</span><span class="p">(</span><span class="s2">&#34;Korrekt weiblich erkannt: </span><span class="si">$truePositive</span><span class="s2">/</span><span class="si">$positives</span><span class="s2">;  korrekt männlich erkannt: </span><span class="si">$trueNegative</span><span class="s2">/</span><span class="si">$negatives</span><span class="s2">;  Gesamtzahl Fehler: </span><span class="si">$numberOfErrors</span><span class="s2">.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Wenn wir jetzt das Programm starten (auf den grünen Pfeil am linken Rand klicken), dann bleibt das Programm stehen mit dem Text &ldquo;Bitte geben Sie einen weiblichen Vornamen ein (&hellip;): &ldquo;.<sup id="fnref:1"><a href="#fn:1" class="footnote-ref" role="doc-noteref">1</a></sup>  Hier geben wir jetzt der Reihe nach weibliche Vornamen ein, z.B.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  Julia&lt;Enter&gt;
</span></span><span class="line"><span class="cl">  Barabara&lt;Enter&gt;
</span></span><span class="line"><span class="cl">  Susanne&lt;Enter&gt;
</span></span><span class="line"><span class="cl">  Ina&lt;Enter&gt;
</span></span><span class="line"><span class="cl">  &lt;Enter&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Danach fragt das Programm nach männlichen Vornamen.  Hier können wir eingeben:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  Luca&lt;Enter&gt;
</span></span><span class="line"><span class="cl">  Konrad&lt;Enter&gt;
</span></span><span class="line"><span class="cl">  Melchior&lt;Enter&gt;
</span></span><span class="line"><span class="cl">  Dieter&lt;Enter&gt;
</span></span><span class="line"><span class="cl">  Wolfgang&lt;Enter&gt;
</span></span><span class="line"><span class="cl">  &lt;Enter&gt;
</span></span></code></pre></td></tr></table>
</div>
</div><p>Danach gibt das Programm die Auszählungen aus, etwa:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  Korrekt weiblich erkannt: 0/4;  korrekt männlich erkannt: 5/5;  Gesamtzahl Fehler: 4.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Funktioniert das Programm?</p>
<p>Wenn du es fehlerfrei geschrieben hast, dann sollte es (bei obiger Eingabe) dieses Resultat ausgeben.  Was bedeutet das?  Das Programm hat alle männlichen Vornamen korrekt erkannt, aber alle weiblichen Vornamen falsch zugeordnet, also 4 Fehler gemacht.  Das ist ja auch kein Wunder, weil das Programm einfach immer behauptet hat, dass der Vorname nicht weiblich ist.  Das ist noch nicht gut.</p>
<h1 id="3-ein-bisschen-bessere-erkennung">3. Ein bisschen bessere Erkennung</h1>
<p>Wie kann man die Erkennung weiblicher Vornamen besser machen?  Naja, wenn wir uns die weiblichen Vornamen anschauen, dann enden die meist auf &ldquo;a&rdquo; und &ldquo;e&rdquo;, vielleicht auch manchmal auf &ldquo;in&rdquo;.  Dann können wir das doch einbauen.  Wenn der Name auf &ldquo;a&rdquo; endet oder der Name auf &ldquo;e&rdquo; endet oder der Name auf &ldquo;in&rdquo; endet, dann ist er weiblich.  Am Ende bleiben nur noch die männlichen Namen übrig.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">fun</span> <span class="nf">isFemale</span><span class="p">(</span><span class="n">name</span> <span class="p">:</span><span class="n">String</span><span class="p">)</span> <span class="p">:</span><span class="n">Boolean</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;e&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;in&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="k">true</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">false</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Hier haben wir 3 neue Elemente:  <code>name.endsWith(&quot;a&quot;)</code> bedeutet, dass der Computer prüft, ob der Text im Namen auf &ldquo;a&rdquo; endet (engl. endsWith).  Hierzu ist es wichtig, dass der Name am Ende kein Leerzeichen oder Zeilenende enthält.  <code>||</code> bedeutet &ldquo;oder&rdquo;, also <code>name.endsWith(&quot;a&quot;)||name.endsWith(&quot;e&quot;)</code> ob der Name auf &ldquo;a&rdquo; oder auf &ldquo;e&rdquo; endet.</p>
<p>Schließlich bedeutet <code>return true</code>, dass <code>true</code>, also wahr, zurückgegeben wird.  Das <code>return</code> bewirkt noch etwas anderes, nämlich, dass die Funkion hier endet.  Wenn also der Name auf &ldquo;a&rdquo;, &ldquo;e&rdquo; oder &ldquo;in&rdquo; endet, dann wird <code>true</code> zurückgegeben und die Funktion beendet.  (Der letzte Befehl <code>return false</code> wird nicht ausgeführt).</p>
<p>Wenn die Bedingung falsch ist, also der Name weder auf &ldquo;a&rdquo; noch auf &ldquo;e&rdquo; noch auf &ldquo;in&rdquo; endet, dann wird <code>return true</code> nicht ausgeführt.  Stattdessen wird die nächste Zeile ausgeführt: <code>return false</code>, also ist der Name nicht weiblich.</p>
<p>Wenn wir jetzt das Programm wieder ausführen und die gleichen Namen wie vorher eingeben, dann ergibt sich:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  Korrekt weiblich erkannt: 4/4;  korrekt männlich erkannt: 4/5;  Gesamtzahl Fehler: 1.
</span></span></code></pre></td></tr></table>
</div>
</div><p>D.h. die weiblichen Namen wurden alle richtig erkannt, aber ein männlicher Name wurde falsch erkannt.  Kannst du erkennen, welcher Name falsch erkannt wurde?  Immerhin hat das Programm jetzt nur noch 1 Fehler gemacht, also schon besser.</p>
<p>Auflösung:  Der männliche Name &ldquo;Luca&rdquo; wird falsch erkannt, da wir gesagt haben, dass alle Vornamen auf &ldquo;a&rdquo; weiblich sind.  Was kann man da tun?  Wir können entweder sagen, dass 1 Fehler bei 9 Eingaben nicht so schlecht ist, oder wir müssen eine weitere Fallunterscheidung machen, z.B. so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl"><span class="k">fun</span> <span class="nf">isFemale</span><span class="p">(</span><span class="n">name</span> <span class="p">:</span><span class="n">String</span><span class="p">)</span> <span class="p">:</span><span class="n">Boolean</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;uca&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;scha&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">false</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;e&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;in&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">true</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">false</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Wir testen also zuerst, ob der Name auf &ldquo;uca&rdquo; oder &ldquo;scha&rdquo; endet.  Das ist bei &ldquo;Luca&rdquo;, &ldquo;Sascha&rdquo; oder &ldquo;Grischa&rdquo; der Fall, alles männliche Namen.</p>
<p>Wenn wir jetzt das Programm erneut ausführen, dann kommen wir auf:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  Korrekt weiblich erkannt: 4/4;  korrekt männlich erkannt: 5/5;  Gesamtzahl Fehler: 0.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Das sieht schon seht gut aus, aber stimmt es wirklich immer?</p>
<h1 id="4-wie-gut-ist-die-erkennung-für-große-namenslisten">4. Wie gut ist die Erkennung für große Namenslisten?</h1>
<p>Bisher mussten wir die weiblichen und männlichen Namen immer wieder eingeben.  Außerdem erlaubt uns das Programm nur maximal je 10 Namen einzugeben.  Wie können wir die gesamten Listen (populärer weiblicher und männlicher) Namen abarbeiten?</p>
<p>Dazu müssten wir die Namen nicht vom Benutzer, sondern aus den Dateien einlesen, etwa so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">femalesFilename</span> <span class="p">=</span> <span class="s2">&#34;femaleNames.csv&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="k">var</span> <span class="py">file</span> <span class="p">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">femalesFilename</span><span class="p">,</span> <span class="s2">&#34;rt&#34;</span><span class="p">)</span> <span class="o">?:</span> <span class="k">throw</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s2">&#34;Kann die Datei </span><span class="si">$femalesFilename</span><span class="s2"> nicht lesen.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">bufferSize</span> <span class="p">=</span> <span class="m">128</span>
</span></span><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">buffer</span> <span class="p">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">bufferSize</span><span class="p">.</span><span class="n">toULong</span><span class="p">())</span> <span class="k">as</span> <span class="n">CValuesRef</span><span class="p">&lt;</span><span class="n">ByteVar</span><span class="p">&gt;?</span> <span class="o">?:</span> <span class="k">throw</span> <span class="n">IllegalStateException</span><span class="p">(</span><span class="s2">&#34;Vasamm exhausted&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="k">in</span> <span class="m">10.</span><span class="p">.</span><span class="m">1000</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">line</span> <span class="p">=</span> <span class="n">fgets</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">bufferSize</span><span class="p">,</span> <span class="k">file</span><span class="p">)</span><span class="o">?.</span><span class="n">toKString</span><span class="p">()</span> <span class="o">?:</span> <span class="k">break</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">name</span> <span class="p">=</span> <span class="n">line</span><span class="p">.</span><span class="n">trim</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="o">..</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="n">fclose</span><span class="p">(</span><span class="k">file</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Da sind jetzt einige neue Elemente enthalten.  Also der Reihe nach: <code>fopen(name, &quot;rt&quot;)</code> öffnet (engl. open) eine Datei (english file) zum Lesen.  Das Ergebnis ist die geöffnete Datei (oder nichts). <code>?: throw IllegalArgumentException(&quot;...&quot;)</code> bedeutet, dass wir einen Ausnahmefall (engl. exception) feststellen wollen (engl. throw heißt werfen), wenn sich die Datei nicht öffnen lässt.  Ausnahmefall bedeutet so auch, dass wir dann nicht mehr weiterarbeiten wollen (das Programm sich beendet).  Ist das gut?  Naja, der Nutzer erhält noch die Textnachricht &ldquo;&hellip;&rdquo;, bevor sich das Programm beendet.  Da steht drinnnen, dass die Datei nicht geöffnet werden kann.  Ohne die Datei mit den Namen kann das Programm nicht weiterarbeiten, deshalb habe ich beschlossen, hier einen Ausnahmefall zu werfen.</p>
<p><code>val buffer = malloc(bufferSize)</code> legt einen Puffer (engl. buffer), also temporären Zwischenspeicher an.  Das ist notwendig, damit beim Einlesen der Namen aus der Datei diese zwischengespeichert werden können.  Leider muss man auch angeben, wieviel Platz man dafür einräumt, hier <code>val bufferSize = 128</code>, also 128 einfache Zeichen (für einen Namen).  Was bedeutet <code>as CValuesRef&lt;ByteVar&gt;?</code> und warum ist das gelb? <code>malloc</code> kommt vom Betriebssystem und dem ist es egal, welche Werte wir in dem Speicher speichern.  Kotlin aber nicht.  Mit <code>as CValuesRef&lt;ByteVar&gt;?</code> erklären wir Kotlin, dass der Speicher für Bytes von beliebiger Gesamtlänge verwendet werden soll.  Das ganze ist gelb, weil die Entwicklungsumgebung nicht recht glauben kann, dass der Speicher wirklich dafür geeignet ist.  Ich weiß aber, dass es funktioniert, probier das Programm am Ende aus.  Das <code>?: throw IllegalStateException(&quot;...&quot;)</code> kennen wir schon, es bedeutet wieder einen Ausnahmefall, wenn wir keinen Speicher bekommen haben (dann kann man auch nicht mehr weiterarbeiten).</p>
<p><code>fgets(buffer, bufferSize, file)</code> liest eine Zeile ein, diesmal nicht von der Kommandozeile, sondern aus der Datei (<code>file</code>).  Die eingelesene Zeile wird in <code>buffer</code> gespeichert und darf maximal <code>bufferSize</code> Zeichen lang sein, danach wird angehalten.</p>
<p>Wenn wir bereits am Ende der Datei sind, dann bewirkt <code>?: break</code>, dass die Schleife abbricht (engl. break heißt abbrechen, manchmal auch unterbrechen, z.B. lunch break). <code>for (n in 10..1000)</code> wird also nicht wirklich 991 mal ausgeführt, nur maximal 991 mal.  (In der Datei stehen etwa 365 Namen).</p>
<p>Schließlich noch <code>fclose(file)</code>, das ist das Gegenstück zu <code>fopen(...)</code>.  Damit wird die Datei wieder geschlossen und deren Arbeitsspeicher freigegeben.  Das ist wichtig, damit das Programm im Arbeitsspeicher nicht immer größer wird.</p>
<p>Der Rest in dieser for-Schleife ist gleich geblieben.</p>
<p>Die zweite for-Schleife für die männlichen Namen sieht ähnlich aus:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">malesFilename</span> <span class="p">=</span> <span class="s2">&#34;maleNames.csv&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="k">file</span> <span class="p">=</span> <span class="n">fopen</span><span class="p">(</span><span class="n">malesFilename</span><span class="p">,</span> <span class="s2">&#34;rt&#34;</span><span class="p">)</span> <span class="o">?:</span> <span class="k">throw</span> <span class="n">IllegalArgumentException</span><span class="p">(</span><span class="s2">&#34;Kann die Datei </span><span class="si">$malesFilename</span><span class="s2"> nicht lesen.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="k">for</span> <span class="p">(</span><span class="n">n</span> <span class="k">in</span> <span class="m">10.</span><span class="p">.</span><span class="m">1000</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">val</span> <span class="py">line</span> <span class="p">=</span> <span class="n">readLine</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">bufferSize</span><span class="p">,</span> <span class="k">file</span><span class="p">)</span> <span class="o">?:</span> <span class="k">break</span>
</span></span><span class="line"><span class="cl">    <span class="o">..</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="n">fclose</span><span class="p">(</span><span class="k">file</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">  <span class="n">free</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>free(buffer)</code> ist das Gegenstück zu <code>val buffer = malloc(...)</code>.  Es beudetet, dass wir den Pufferspeicher wieder freigeben (engl. free, frei oder befreien, freigeben).</p>
<p>Damit das ganze funktioniert, muss man beim Herunterladen die 2 Dateien unter diesen Namen abspeichern:  die <a href="/femaleNames.csv">weiblichen Vornamen</a> unter &ldquo;femaleNames.csv&rdquo; und die <a href="/maleNames.csv">männlichen Vornamen</a> unter &ldquo;maleNames.csv&rdquo;.  Alles im Projekt-Verzeichnis.</p>
<p>Mit den obigen Veränderungen bekomme ich:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  Korrekt weiblich erkannt: 280.0/365.0;  Korrekt männlich erkannt: 315.0/345.0, Anzahl Fehler: 115.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Sicherlich ist immer noch nicht alles perfekt, aber es ist auch nicht ganz klar, ob die 115 Fehler viel oder wenig sind.  Deshalb ist es vielleicht besser, wenn wir die Raten berechnen, d.h. 280/365 teilen, 315/345 teilen und statt 115 den Durchschnitt der Fehlerraten ausgeben, etwa so:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">tpr</span> <span class="p">=</span> <span class="n">round</span><span class="p">(</span><span class="n">truePositive</span><span class="p">/</span><span class="n">positives</span><span class="p">*</span><span class="m">100</span><span class="p">).</span><span class="n">toInt</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">tnr</span> <span class="p">=</span> <span class="n">round</span><span class="p">(</span><span class="n">trueNegative</span><span class="p">/</span><span class="n">negatives</span><span class="p">*</span><span class="m">100</span><span class="p">).</span><span class="n">toInt</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">correctness</span> <span class="p">=</span> <span class="p">(</span><span class="n">tpr</span> <span class="p">+</span><span class="n">tnr</span><span class="p">)/</span><span class="m">2</span>
</span></span><span class="line"><span class="cl">  <span class="k">val</span> <span class="py">mismatch</span> <span class="p">=</span> <span class="n">round</span><span class="p">(</span><span class="m">100</span> <span class="p">-</span> <span class="n">correctness</span><span class="p">).</span><span class="n">toInt</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">  <span class="n">println</span><span class="p">(</span><span class="s2">&#34;Rate korrekt weiblich erkannter: </span><span class="si">$tpr</span><span class="s2">%;  Rate korrekt männlich erkannter: </span><span class="si">$tnr</span><span class="s2">%;  Fehlerrate: </span><span class="si">$mismatch</span><span class="s2">%.&#34;</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>Hier bedeutet <code>round(...).toInt()</code>, dass auf ganze Zahlen gerundet wird. <code>...*100</code> bedeutet, dass wir die Rate in Prozent angeben (pro hundert), dementsprechend habe ich &ldquo;$tpr%;&rdquo; geschrieben.</p>
<p>Dann sieht das Ganze so aus:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  Rate korrekt weiblich erkannter: 77%; Rate korrekt männlich erkannter: 91%, Fehlerrate: 16%.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Das heißt, dass etwa 77% der weiblichen Namen erkannt werden und 91% der männlichen Namen.  Im Durchschnitt 16% Fehler, das reicht immerhin schon mal für eine 2 (gut).</p>
<p>Man kann es noch etwas besser machen, wenn man noch ein paar weitere Endungen für weibliche Namen hinzufügt:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">fun</span> <span class="nf">isFemale</span><span class="p">(</span><span class="n">name</span> <span class="p">:</span><span class="n">String</span><span class="p">)</span> <span class="p">:</span><span class="n">Boolean</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;uca&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;scha&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="k">false</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;a&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;e&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;in&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;i&#34;</span><span class="p">)</span><span class="o">||</span><span class="n">name</span><span class="p">.</span><span class="n">endsWith</span><span class="p">(</span><span class="s2">&#34;th&#34;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span> <span class="k">true</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="k">false</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  Rate korrekt weiblicher Namen: 79%; Rate korrekt männlicher Namen: 88%; Fehlerrate: 16%.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Es werden mehr weibliche Namen richtig erkannt, aber auch weniger männliche Namen.  Die Fehlerrate insgesamt ist gleich geblieben.</p>
<p>Wenn wir wissen wollen, wie gut die Erkennung für die Menschen in Deutschland ist, sollten wir vielleicht berücksichtigen, dass die Namen am Anfang der Listen häufiger sind.  Das kann man so machen:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Kotlin" data-lang="Kotlin"><span class="line"><span class="cl">  <span class="k">var</span> <span class="py">truePositive</span> <span class="p">=</span> <span class="m">0.0</span><span class="p">;</span>  <span class="k">var</span> <span class="py">falseNegative</span> <span class="p">=</span> <span class="m">0.0</span>
</span></span><span class="line"><span class="cl">  <span class="o">..</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="n">isFemale</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="n">truePositive</span> <span class="o">+=</span> <span class="m">1.0</span><span class="p">/</span><span class="n">n</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="n">falseNegative</span> <span class="o">+=</span> <span class="m">1.0</span><span class="p">/</span><span class="n">n</span>
</span></span><span class="line"><span class="cl">  <span class="o">..</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">  <span class="k">var</span> <span class="py">trueNegative</span> <span class="p">=</span> <span class="m">0.0</span><span class="p">;</span>  <span class="k">var</span> <span class="py">falsePositive</span> <span class="p">=</span> <span class="m">0.0</span>
</span></span><span class="line"><span class="cl">  <span class="o">..</span><span class="p">.</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!is</span><span class="n">Female</span><span class="p">(</span><span class="n">name</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">      <span class="n">trueNegative</span> <span class="o">+=</span> <span class="m">1.0</span><span class="p">/</span><span class="n">n</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span>
</span></span><span class="line"><span class="cl">      <span class="n">falsePositive</span> <span class="o">+=</span> <span class="m">1.0</span><span class="p">/</span><span class="n">n</span>
</span></span><span class="line"><span class="cl">  <span class="o">..</span><span class="p">.</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p><code>truePositive += 1.0/n</code> im Gegensatz zu <code>truePositive++</code> bedeutet, dass wir nicht konstant immer um 1 erhöhen, sondern um $1/n$.  Also beim ersten Durchlauf (<code>n=10</code>) um $1/10=0.10000$, beim zweiten Durchlauf (<code>n=11</code>) um $1/11=0.09090909&hellip;$, schon etwas weniger, und im letzten Durchlauf (<code>n=1000</code>) dann nur noch um $1/1000=0.0010000$.  Das sind zwar ziemlich kleine und krumme Zahlen, aber am Ende geben wir nur Verhältnisse aus und runden auf ganze Prozent:</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">  Rate korrekt weiblicher Namen: 85%; Rate korrekt männlicher Namen: 91%;  Fehlerrate: 12%.
</span></span></code></pre></td></tr></table>
</div>
</div><p>Also noch etwas besser.</p>
<p>Jetzt ist Zeit zum selber probieren:  Fällt dir noch eine Regel ein, an der man weibliche Vornamen erkennt?  Oder nicht-weibliche Vornamen?</p>
<p>Kannst du mit <code>val line = readLine() ?: return</code> das Programm so erweitern, dass es am Ende nach 1 Namen fragt und für diesen entscheidet (und ausgibt), ob er weiblich oder männlich ist?</p>
<p><a href="/02solution.md">Lösung</a></p>
<div class="footnotes" role="doc-endnotes">
<hr>
<ol>
<li id="fn:1">
<p>Wenn das Programm nicht stehen bleibt, müsst ihr es von Hand starten: am unteren Rand auf Terminal klicken und dort <code>.\build\bin\native\debugExecutable\gender.exe</code> eingeben, dabei ist &ldquo;gender&rdquo; der Name des Projektes.&#160;<a href="#fnref:1" class="footnote-backref" role="doc-backlink">&#x21a9;&#xfe0e;</a></p>
</li>
</ol>
</div>

    </div>

    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">Author</span>
    <span class="item-content">melli79</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">LastMod</span>
    <span class="item-content">
        2021-12-19
        
    </span>
  </p>
  <p class="copyright-item">
      <span class="item-title">Markdown</span>
      <span class="item-content"><a class="link-to-markdown" href="https://melli79.github.io/post/29statistics/index.md" target="_blank">The Markdown version »</a></span>
    </p>
  
</div>
<footer class="post-footer">
      
      <nav class="post-nav">
        <a class="prev" href="/post/02ifandsmurfs/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">02 If und Schlümpfe</span>
            <span class="prev-text nav-mobile">Prev</span>
          </a>
        <a class="next" href="/post/01loops/">
            <span class="next-text nav-default">01 For-Schleifen</span>
            <span class="next-text nav-mobile">Next</span>
            <i class="iconfont icon-right"></i>
          </a>
      </nav>
    </footer>
  </article>
        </div>
        <div id="comments-gitment"></div>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/default.min.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/gh/theme-next/theme-next-gitment@1/gitment.browser.min.js" crossorigin="anonymous"></script>
    <script type="text/javascript">
      var gitment = new Gitment({
        id: '2021-12-19 20:25:47 \u002b0100 CET',
        title: '29. Statistik und Geschlecht',
        link: decodeURI(location.href),
        desc: 'Heute wollen wir uns fragen, wie der Computer am Namen erkennen kann, ob jemand Mann oder Frau ist.\n1. Woran erkennt man, ob jemand weiblich ist? Natürlich ist der Vorname nicht die einzige Quelle, anhand derer man das entscheiden kann, z.B. kann man oft auch am Surf- oder Kaufverhalten herausfinden, ob jemand Mann (Junge) oder Frau (Mädchen) ist.\nAuch ist es nicht immer ganz eindeutig, ob jemand Mann oder Frau ist, z.',
        owner: 'melli79',
        repo: '',
        oauth: {
          client_id: '',
          client_secret: ''
        }
      });
      gitment.render('comments-gitment');
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>

  

  
    <script src="https://utteranc.es/client.js"
            repo="melli79/"
            issue-term="pathname"
            theme="github-light"
            crossorigin="anonymous"
            async>
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://github.com/utterance">comments powered by utterances.</a></noscript>

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="mailto:melchiorG@gMail.com" class="iconfont icon-email" title="email"></a>
      <a href="https://www.linkedin.com/in/melchior-grutzmann-01741510/" class="iconfont icon-linkedin" title="linkedin"></a>
      <a href="http://github.com/melli79/" class="iconfont icon-github" title="github"></a>
      <a href="https://www.instagram.com/gulinculture/" class="iconfont icon-instagram" title="instagram"></a>
  <a href="https://melli79.github.io/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://gohugo.io">Hugo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  

  <span class="copyright-year">
    &copy; 
    2020 - 
    2023
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">melli79</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>



<script type="text/javascript" src="/js/main.min.1c70606d1b733282f06230615f5561b5894924b6f9930ba2ab99cf1254f75a1a.js"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script async src="https://cdn.jsdelivr.net/npm/mathjax@2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"  integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>








</body>
</html>
